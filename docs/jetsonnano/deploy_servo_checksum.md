---
sidebar_position: 8
title: 六足舵机checksum计算
---

使用六足的舵机要计算checksum, 一个简单的cpp实例如下：

```cpp
#include <stdio.h>

int main()
{
    // char buf[] = {0xf9, 0xff, 0xfe, 0x0d, 0x83, 0x66, 0x02, 0x08, 0x40, 0xfc, 0x07, 0x22, 0xfc, 0x09, 0x18, 0xfc, 0x00};
    // char buf[] = {0xf9, 0xff, 0xfe, 0x05, 0x03, 0x66, 0x7E, 0xff, 0x00};
    // F9 FF FE 3A 83 65 02 08 00 00 09 FC 03 0A 40 FC 02 00 00 03 E8 03 04 54 FC 05 00 00 06 FC 03 07 40 FC 11 00 00 12 FA FB 13 B6 03 0B 00 00 0C 0E FC 0D A2 03 0E 00 00 0F FA FB 10 B6 03 64 F9
    char buf[] = {0xF9, 0xFF, 0xFE, 0x3A, 0x83, 0x65, 0x02, 0x08, 0x00, 0x00, 0x09, 0xFC, 0x03, 0x0A, 0x40, 0xFC, 0x02, 0x00, 0x00, 0x03, 0xE8, 0x03, 0x04, 0x54, 0xFC, 0x05, 0x00, 0x00, 0x06, 0xFC, 0x03, 0x07, 0x40, 0xFC, 0x11, 0x00, 0x00, 0x12, 0xFA, 0xFB, 0x13, 0xB6, 0x03, 0x0B, 0x00, 0x00, 0x0C, 0x0E, 0xFC, 0x0D, 0xA2, 0x03, 0x0E, 0x00, 0x00, 0x0F, 0xFA, 0xFB, 0x10, 0xB6, 0x03, 0x00};
    char checksum;
    int len = sizeof(buf) / sizeof(buf[0]);
    printf("lenght: %d\n", len);
    printf("start: ");
    for (int i = 0; i < len; i++)
    {
        printf("%02x ", buf[i]);
    }
    printf("\n");
    int subLen = len - 1;
    for (size_t i = 2; i < subLen; i++)
    {
        checksum += buf[i];
    }
    checksum = ~(checksum & 0xff);
    printf("checksum is: %x\n", (checksum));
    buf[len-1] = checksum;
    printf("end: ");
    for (int i = 0; i < len; i++)
    {
        printf("%02x ", buf[i]);
    }
    printf("\n");
    checksum = 0;
    return 0;
}

```

编译方法
```shell
g++ -o out test.cpp
./out
```